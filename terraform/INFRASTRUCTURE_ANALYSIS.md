# –ê–Ω–∞–ª—ñ–∑ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ Terraform

## üìã –û–ø–∏—Å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

### –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Terraform –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤ Google Cloud Platform (GCP) –∑ –º–æ–¥—É–ª—å–Ω–æ—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

#### 1. **–ú–µ—Ä–µ–∂–∞ (Network Module)**
- **VPC**: –°—Ç–≤–æ—Ä—é—î VPC –∑ –Ω–∞–∑–≤–æ—é `{vpc_name}-{environment}`
- **–ü—É–±–ª—ñ—á–Ω–∞ –ø—ñ–¥–º–µ—Ä–µ–∂–∞**: `{vpc_name}-public-{environment}`
  - –£–≤—ñ–º–∫–Ω–µ–Ω–æ Private Google Access
  - –£–≤—ñ–º–∫–Ω–µ–Ω–æ Flow Logs
- **–ü—Ä–∏–≤–∞—Ç–Ω–∞ –ø—ñ–¥–º–µ—Ä–µ–∂–∞**: `{vpc_name}-private-{environment}`
  - –£–≤—ñ–º–∫–Ω–µ–Ω–æ Private Google Access
  - –£–≤—ñ–º–∫–Ω–µ–Ω–æ Flow Logs
- **–ú–∞—Ä—à—Ä—É—Ç–∏**: Egress route –¥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∑ —Ç–µ–≥–æ–º `internet-{environment}`

#### 2. **NAT Gateway Module**
- **Cloud Router**: –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –¥–ª—è NAT Gateway
- **Cloud NAT**: –ù–∞–¥–∞—î —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
- –£–º–æ–≤–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ `enable_nat_gateway`)

#### 3. **Firewall Module**
–ü—Ä–∞–≤–∏–ª–∞ —Ñ–∞–π—Ä–≤–æ–ª—É:
- **Bastion SSH**: SSH –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (0.0.0.0/0) ‚Üí bastion (–ø–æ—Ä—Ç 22)
- **Frontend Web**: HTTP/HTTPS –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É ‚Üí frontend (–ø–æ—Ä—Ç–∏ 80, 443, 8081, 4200)
- **Backend API**: API —Ç—Ä–∞—Ñ—ñ–∫ –∑ frontend ‚Üí backend (–ø–æ—Ä—Ç 8080)
- **Database Access**: –î–æ—Å—Ç—É–ø –¥–æ –ë–î –∑ backend ‚Üí postgres (–ø–æ—Ä—Ç 5432)
- **Internal SSH**: SSH –∑ bastion ‚Üí –≤—Å—ñ —ñ–Ω—Å—Ç–∞–Ω—Å–∏ (–ø–æ—Ä—Ç 22)
- **Internal All**: –í–µ—Å—å —Ç—Ä–∞—Ñ—ñ–∫ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ VPC (CIDR)

#### 4. **Database Module**
- **PostgreSQL VM**: –°—Ç–≤–æ—Ä—é—î Compute Instance –∑ PostgreSQL –≤ Docker
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î startup script –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
- –†–æ–∑–º—ñ—â–µ–Ω–æ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ñ–π –ø—ñ–¥–º–µ—Ä–µ–∂—ñ

#### 5. **Instance Module**
- –°—Ç–≤–æ—Ä—é—î VM —ñ–Ω—Å—Ç–∞–Ω—Å–∏ –∑–≥—ñ–¥–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –ü—ñ–¥—Ç—Ä–∏–º—É—î –ø—É–±–ª—ñ—á–Ω—ñ —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø—ñ–¥–º–µ—Ä–µ–∂—ñ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î firewall rules –¥–ª—è –ø–æ—Ä—Ç—ñ–≤ –∫–æ–∂–Ω–æ–≥–æ —ñ–Ω—Å—Ç–∞–Ω—Å—É
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SSH –∫–ª—é—á—ñ –¥–ª—è –¥–æ—Å—Ç—É–ø—É

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏

#### Backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- `backend/stage.properties` - –¥–ª—è stage —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- `backend/prod.properties` - –¥–ª—è prod —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- **–ü–†–û–ë–õ–ï–ú–ê**: Backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–∞ –≤ `main.tf`

#### Values —Ñ–∞–π–ª–∏
- `values/stage.tfvars` - –∑–º—ñ–Ω–Ω—ñ –¥–ª—è stage
- `values/prod.tfvars` - –∑–º—ñ–Ω–Ω—ñ –¥–ª—è prod

#### –°–∫—Ä–∏–ø—Ç–∏
- `startscript.sh` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GCP –ø—Ä–æ–µ–∫—Ç—É

---

## üö® –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### –ö–†–ò–¢–ò–ß–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

#### 1. **–í—ñ–¥—Å—É—Ç–Ω—è backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤ Terraform**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ —Ñ–∞–π–ª—ñ `main.tf` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –±–ª–æ–∫ `backend` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è state —Ñ–∞–π–ª—É.
```terraform
# –í main.tf –Ω–µ–º–∞—î:
terraform {
  backend "gcs" {
    # –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
  }
}
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: 
- State —Ñ–∞–π–ª –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ù–µ–º–æ–∂–ª–∏–≤–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –∫–æ–º–∞–Ω–¥—ñ
- –†–∏–∑–∏–∫ –≤—Ç—Ä–∞—Ç–∏ state —Ñ–∞–π–ª—É
- –ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –ø—Ä–∏ –æ–¥–Ω–æ—á–∞—Å–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `-backend-config` –ø—Ä–∏ `terraform init`

#### 2. **Hardcoded environment –≤ labels**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `modules/instance/main.tf`:
```terraform
labels = {
  application = "app"
  environment = "stage"  # ‚ùå Hardcoded!
}
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: –í—Å—ñ —ñ–Ω—Å—Ç–∞–Ω—Å–∏ –º–∞—Ç–∏–º—É—Ç—å `environment = "stage"` –Ω–∞–≤—ñ—Ç—å –≤ prod

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `var.environment` –∞–±–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å

#### 3. **–ù–µ–±–µ–∑–ø–µ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å –ë–î –≤ tfvars**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `values/stage.tfvars`:
```hcl
postgres_password = "your-secure-password-here"
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: 
- –ü–∞—Ä–æ–ª—å –≤ plain text
- –ú–æ–∂–µ –±—É—Ç–∏ –∑–∞–∫–æ–º—ñ—á–µ–Ω–∏–π –≤ git
- –ù–µ–±–µ–∑–ø–µ–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Secret Manager –∞–±–æ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

#### 4. **–î—É–±–ª—é–≤–∞–Ω–Ω—è firewall rules**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `modules/instance/main.tf` —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –¥–æ–¥–∞—Ç–∫–æ–≤—ñ firewall rules:
```terraform
resource "google_compute_firewall" "allow_service" {
  for_each = { for vm in var.vm_instances : vm.name => vm }
  # ...
  source_ranges = ["0.0.0.0/0"]  # ‚ùå –í—ñ–¥–∫—Ä–∏–≤–∞—î –≤—Å—ñ –ø–æ—Ä—Ç–∏ –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É!
}
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: 
- –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∑ `firewall` –º–æ–¥—É–ª—è
- –ú–æ–∂–ª–∏–≤–µ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∑–∞–π–≤–∏—Ö –ø–æ—Ä—Ç—ñ–≤ –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü—Ä–æ–±–ª–µ–º–∏ –∑ –±–µ–∑–ø–µ–∫–æ—é

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π —Ä–µ—Å—É—Ä—Å –∞–±–æ –∑—Ä–æ–±–∏—Ç–∏ –π–æ–≥–æ —É–º–æ–≤–Ω–∏–º

### –°–ï–†–ï–î–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

#### 5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤–∏—Ö–æ–¥—É –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î `terraform.tfvars.example` –∞–±–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –ø—Ä–æ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ

#### 6. **–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è service account**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `modules/instance/main.tf` —Ç–∞ `modules/db/main.tf`:
```terraform
service_account {
  email  = "default"  # ‚ùå –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è default SA
  scopes = ["cloud-platform"]  # ‚ùå –ó–∞–Ω–∞–¥—Ç–æ —à–∏—Ä–æ–∫—ñ –ø—Ä–∞–≤–∞
}
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: 
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è default service account
- –ó–∞–Ω–∞–¥—Ç–æ —à–∏—Ä–æ–∫—ñ –ø—Ä–∞–≤–∞ (cloud-platform)
- –ù–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø—Ä–∏–Ω—Ü–∏–ø—É –Ω–∞–π–º–µ–Ω—à–∏—Ö –ø—Ä–∏–≤—ñ–ª–µ—ó–≤

**–†—ñ—à–µ–Ω–Ω—è**: –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º—ñ service accounts –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏

#### 7. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å outputs –¥–ª—è –≤–∞–∂–ª–∏–≤–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î outputs –¥–ª—è:
- IP –∞–¥—Ä–µ—Å —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
- Database connection strings
- NAT Gateway IP –∞–¥—Ä–µ—Å

#### 8. **–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∞ –∑–æ–Ω–∞ –¥–ª—è backend —ñ–Ω—Å—Ç–∞–Ω—Å—É**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `values/stage.tfvars`:
```hcl
{
  name         = "app-server-1"
  zone         = "europe-west3-b"  # ‚ùå –ü—Ä–∏–≤–∞—Ç–Ω–∞ –ø—ñ–¥–º–µ—Ä–µ–∂–∞ –≤ –∑–æ–Ω—ñ b
  subnet       = "private"
}
```
–ê–ª–µ –≤ `main.tf`:
```terraform
{
  name = module.network.private_subnet_name
  zone = "${var.region}-b"  # ‚ùå Hardcoded –∑–æ–Ω–∞
}
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è–º —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤

#### 9. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ç–µ–≥—ñ–≤ –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ë–∞–≥–∞—Ç–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ –Ω–µ –º–∞—é—Ç—å labels –¥–ª—è:
- Cost tracking
- Environment identification
- Resource management

#### 10. **–ù–µ–±–µ–∑–ø–µ—á–Ω–∏–π internal firewall rule**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `modules/firewall/main.tf`:
```terraform
resource "google_compute_firewall" "internal_all" {
  allow {
    protocol = "tcp"
    ports    = ["0-65535"]  # ‚ùå –í—ñ–¥–∫—Ä–∏–≤–∞—î –í–°–Ü –ø–æ—Ä—Ç–∏
  }
  source_ranges = [var.vpc_cidr]
}
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: 
- –ó–∞–Ω–∞–¥—Ç–æ —à–∏—Ä–æ–∫–∏–π –¥–æ—Å—Ç—É–ø –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ VPC
- –ü–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—É least privilege
- –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∞—É–¥–∏—Ç—É

### –î–†–Ü–ë–ù–Ü –ü–†–û–ë–õ–ï–ú–ò / –ü–û–ö–†–ê–©–ï–ù–ù–Ø

#### 11. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–¥—É–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –∑ –ª–æ–∫–∞–ª—å–Ω–∏—Ö —à–ª—è—Ö—ñ–≤ –±–µ–∑ –≤–µ—Ä—Å—ñ–π

#### 12. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å lifecycle –ø—Ä–∞–≤–∏–ª**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î `lifecycle` –±–ª–æ–∫—ñ–≤ –¥–ª—è:
- –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤–∏–ø–∞–¥–∫–æ–≤–æ–º—É –≤–∏–¥–∞–ª–µ–Ω–Ω—é
- –Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –≤ –ø–µ–≤–Ω–∏—Ö –ø–æ–ª—è—Ö

#### 13. **–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —É startup script**
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ `modules/db/startup.sh`:
```bash
set -e  # ‚ùå –ù–µ–º–∞—î -u —Ç–∞ -o pipefail
```
**–ù–∞—Å–ª—ñ–¥–∫–∏**: –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫

#### 14. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å health checks**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î health checks –¥–ª—è:
- Database
- Application instances

#### 15. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å monitoring —Ç–∞ logging**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è:
- Cloud Monitoring
- Cloud Logging
- Alerting

#### 16. **–ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π config.json**
**–ü—Ä–æ–±–ª–µ–º–∞**: –§–∞–π–ª `config.json` —ñ—Å–Ω—É—î, –∞–ª–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ Terraform –∫–æ–¥—ñ

#### 17. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å data sources**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è data sources –¥–ª—è:
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

#### 18. **–î—É–±–ª—é–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤ —É firewall**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Ä—Ç–∏ –≤–∂–µ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤ `firewall` –º–æ–¥—É–ª—ñ, –∞–ª–µ —Ç–∞–∫–æ–∂ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –≤ `instance` –º–æ–¥—É–ª—ñ

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω—ñ)
1. ‚úÖ –î–æ–¥–∞—Ç–∏ backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è GCS
2. ‚úÖ –í–∏–ø—Ä–∞–≤–∏—Ç–∏ hardcoded environment –≤ labels
3. ‚úÖ –ü–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –ø–∞—Ä–æ–ª—ñ –≤ Secret Manager
4. ‚úÖ –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—é—é—á—ñ firewall rules –∑ instance –º–æ–¥—É–ª—è
5. ‚úÖ –û–±–º–µ–∂–∏—Ç–∏ internal firewall rule

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–ª–∏–≤—ñ)
6. ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º—ñ service accounts –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏
7. ‚úÖ –î–æ–¥–∞—Ç–∏ outputs –¥–ª—è –≤–∞–∂–ª–∏–≤–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤
8. ‚úÖ –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –∑–æ–Ω–∏ –¥–ª—è —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
9. ‚úÖ –î–æ–¥–∞—Ç–∏ labels –¥–æ –≤—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤
10. ‚úÖ –î–æ–¥–∞—Ç–∏ lifecycle –ø—Ä–∞–≤–∏–ª–∞

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3 (–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è)
11. ‚úÖ –î–æ–¥–∞—Ç–∏ health checks
12. ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ monitoring —Ç–∞ logging
13. ‚úÖ –î–æ–¥–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
14. ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ data sources
15. ‚úÖ –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è Terraform

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–ú–æ–¥—É–ª—ñ–≤**: 5 (network, firewall, nat-gateway, db, instance)
- **–ö—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º**: 4
- **–°–µ—Ä–µ–¥–Ω—ñ—Ö –ø—Ä–æ–±–ª–µ–º**: 6
- **–î—Ä—ñ–±–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º**: 8
- **–í—Å—å–æ–≥–æ –ø—Ä–æ–±–ª–µ–º**: 18

---

## üîß –®–≤–∏–¥–∫—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. –î–æ–¥–∞—Ç–∏ backend –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
```terraform
# –í main.tf
terraform {
  backend "gcs" {
    # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ -backend-config=backend/stage.properties
  }
}
```

### 2. –í–∏–ø—Ä–∞–≤–∏—Ç–∏ labels
```terraform
# –í modules/instance/main.tf
labels = {
  application = "app"
  environment = var.environment  # ‚úÖ
}
```

### 3. –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—é—é—á—ñ firewall rules
–í–∏–¥–∞–ª–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å `google_compute_firewall.allow_service` –∑ `modules/instance/main.tf`

### 4. –û–±–º–µ–∂–∏—Ç–∏ internal firewall
–ó–∞–º—ñ—Å—Ç—å `0-65535` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–æ—Ä—Ç–∏ –∞–±–æ –ø—Ä–∏–±—Ä–∞—Ç–∏ —Ü–µ –ø—Ä–∞–≤–∏–ª–æ

---

*–î–∞—Ç–∞ –∞–Ω–∞–ª—ñ–∑—É: $(date)*

